CREATE USER IF NOT EXISTS 'elvira'@'%';
CREATE USER IF NOT EXISTS 'elvira'@'localhost';
CREATE DATABASE IF NOT EXISTS library;

ALTER USER 'elvira'@'%'
    IDENTIFIED BY
        PASSWORD '*68064B37C1AB68D3BAEB5113936AD53688FD65C2'
    REQUIRE 
        ISSUER '/C=SI/O=MIA Home Lab/CN=MIA Home Lab CA' AND
        SUBJECT '/C=SI/O=MIA Home Lab/CN=MIA Home Lab DB Client'
    WITH
        MAX_USER_CONNECTIONS 10
    PASSWORD EXPIRE NEVER
    ACCOUNT UNLOCK;

GRANT ALL PRIVILEGES
    ON library.*
    TO 'elvira'@'%';

ALTER USER 'elvira'@'localhost'
    IDENTIFIED BY
        PASSWORD '*68064B37C1AB68D3BAEB5113936AD53688FD65C2'
    WITH
        MAX_USER_CONNECTIONS 10
    PASSWORD EXPIRE NEVER
    ACCOUNT UNLOCK;

GRANT ALL PRIVILEGES
    ON library.*
    TO 'elvira'@'localhost';
